
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://ferdinand026.github.io/documentation-zh/en/en/architecture/event.html">
      
      
        <link rel="prev" href="../using_javatron/private_network.html">
      
      
        <link rel="next" href="database.html">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.8">
    
    
      
        <title>Event Subscription - Java Tron</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.8608ea7d.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#event-subscription" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Java Tron" class="md-header__button md-logo" aria-label="Java Tron" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Java Tron
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Event Subscription
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="Select language">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.5 17.5 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2zm-2.62 7 1.62-4.33L19.12 17z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="../../architecture/event.html" hreflang="zh" class="md-select__link">
              简体中文
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="event.html" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../zh/index.html" class="md-tabs__link">
          
  
  简体中文

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../index.html" class="md-tabs__link">
          
  
  English

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Java Tron" class="md-nav__button md-logo" aria-label="Java Tron" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Java Tron
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    简体中文
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            简体中文
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../zh/index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    主页
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    English
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            English
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Getting Started With java-tron
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            Getting Started With java-tron
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting_started/getting_started_with_javatron.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" checked>
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Using java-tron
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Using java-tron
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../using_javatron/installing_javatron.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deploying
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../using_javatron/backup_restore.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Backup and Restore
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../using_javatron/litefullnode.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lite FullNode
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../using_javatron/private_network.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Private Network
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Event Subscription
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="event.html" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Event Subscription
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#using-event-plugin-for-event-subscription" class="md-nav__link">
    <span class="md-ellipsis">
      Using Event Plugin for Event Subscription
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Using Event Plugin for Event Subscription">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tip" class="md-nav__link">
    <span class="md-ellipsis">
      TIP
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#event-type" class="md-nav__link">
    <span class="md-ellipsis">
      Event Type
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Event Type">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#transaction-event" class="md-nav__link">
    <span class="md-ellipsis">
      Transaction Event
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#block-event" class="md-nav__link">
    <span class="md-ellipsis">
      Block Event
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#contract-event" class="md-nav__link">
    <span class="md-ellipsis">
      Contract Event
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#contract-log-event" class="md-nav__link">
    <span class="md-ellipsis">
      Contract Log Event
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#new-features" class="md-nav__link">
    <span class="md-ellipsis">
      New Features
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#github-projects" class="md-nav__link">
    <span class="md-ellipsis">
      Github projects
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Github projects">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#event-plugin" class="md-nav__link">
    <span class="md-ellipsis">
      Event plugin
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#event-query" class="md-nav__link">
    <span class="md-ellipsis">
      Event query
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-java-trons-built-in-message-queue-for-event-subscription" class="md-nav__link">
    <span class="md-ellipsis">
      Using java-tron's Built-in Message Queue for Event Subscription
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Using java-tron&#39;s Built-in Message Queue for Event Subscription">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configure-node" class="md-nav__link">
    <span class="md-ellipsis">
      Configure node
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#start-node" class="md-nav__link">
    <span class="md-ellipsis">
      Start node
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prepare-event-subscription-script" class="md-nav__link">
    <span class="md-ellipsis">
      Prepare event subscription script
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#start-subscriber" class="md-nav__link">
    <span class="md-ellipsis">
      Start subscriber
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="database.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Database Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../using_javatron/connecting_to_tron.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Network Connection
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../using_javatron/metrics.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Node Monitoring
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../using_javatron/toolkit.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Node Maintenance Tool
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    API
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/http.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HTTP API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/rpc.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    gRPC API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/json-rpc.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    jsonRPC API
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_5" >
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Core Protocol
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            Core Protocol
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mechanism-algorithm/dpos.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DPoS
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mechanism-algorithm/sr.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Super Representative
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mechanism-algorithm/account.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Account Model
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mechanism-algorithm/resource.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Resource Model
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../contracts/contract.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Smart Contract
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mechanism-algorithm/system-contracts.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    System Contract
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mechanism-algorithm/dex.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Decentralized Exchange
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../mechanism-algorithm/multi-signatures.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Account Permission Management
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_6" >
        
          
          <label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    For java-tron Developers
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6">
            <span class="md-nav__icon md-icon"></span>
            For java-tron Developers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../developers/java-tron.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Developer Guide
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_7" >
        
          
          <label class="md-nav__link" for="__nav_2_7" id="__nav_2_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    For Dapp Developers
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_7">
            <span class="md-nav__icon md-icon"></span>
            For Dapp Developers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../contracts/tools.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tools
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#using-event-plugin-for-event-subscription" class="md-nav__link">
    <span class="md-ellipsis">
      Using Event Plugin for Event Subscription
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Using Event Plugin for Event Subscription">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tip" class="md-nav__link">
    <span class="md-ellipsis">
      TIP
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#event-type" class="md-nav__link">
    <span class="md-ellipsis">
      Event Type
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Event Type">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#transaction-event" class="md-nav__link">
    <span class="md-ellipsis">
      Transaction Event
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#block-event" class="md-nav__link">
    <span class="md-ellipsis">
      Block Event
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#contract-event" class="md-nav__link">
    <span class="md-ellipsis">
      Contract Event
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#contract-log-event" class="md-nav__link">
    <span class="md-ellipsis">
      Contract Log Event
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#new-features" class="md-nav__link">
    <span class="md-ellipsis">
      New Features
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#github-projects" class="md-nav__link">
    <span class="md-ellipsis">
      Github projects
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Github projects">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#event-plugin" class="md-nav__link">
    <span class="md-ellipsis">
      Event plugin
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#event-query" class="md-nav__link">
    <span class="md-ellipsis">
      Event query
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-java-trons-built-in-message-queue-for-event-subscription" class="md-nav__link">
    <span class="md-ellipsis">
      Using java-tron's Built-in Message Queue for Event Subscription
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Using java-tron&#39;s Built-in Message Queue for Event Subscription">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configure-node" class="md-nav__link">
    <span class="md-ellipsis">
      Configure node
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#start-node" class="md-nav__link">
    <span class="md-ellipsis">
      Start node
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prepare-event-subscription-script" class="md-nav__link">
    <span class="md-ellipsis">
      Prepare event subscription script
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#start-subscriber" class="md-nav__link">
    <span class="md-ellipsis">
      Start subscriber
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="event-subscription">Event Subscription<a class="headerlink" href="#event-subscription" title="Permanent link">&para;</a></h1>
<h2 id="using-event-plugin-for-event-subscription">Using Event Plugin for Event Subscription<a class="headerlink" href="#using-event-plugin-for-event-subscription" title="Permanent link">&para;</a></h2>
<h3 id="tip">TIP<a class="headerlink" href="#tip" title="Permanent link">&para;</a></h3>
<p>The TIP: <a href="https://github.com/tronprotocol/tips/blob/master/tip-12.md">TIP-12:TRON event subscribes model</a> .</p>
<h3 id="event-type">Event Type<a class="headerlink" href="#event-type" title="Permanent link">&para;</a></h3>
<p>TRON Event Subscription supports 4 types of event:</p>
<h4 id="transaction-event">Transaction Event<a class="headerlink" href="#transaction-event" title="Permanent link">&para;</a></h4>
<p>The parameters passed to Subscriber:</p>
<div class="codehilite"><pre><span></span><code><span class="n">transactionId</span><span class="o">:</span><span class="w"> </span><span class="n">transaction</span><span class="w"> </span><span class="n">hash</span>
<span class="n">blockHash</span><span class="o">:</span><span class="w"> </span><span class="n">block</span><span class="w"> </span><span class="n">hash</span>
<span class="n">blockNumber</span><span class="o">:</span><span class="w"> </span><span class="n">block</span><span class="w"> </span><span class="n">number</span>
<span class="n">energyUsage</span><span class="o">:</span><span class="w"> </span><span class="n">energy</span><span class="w"> </span><span class="n">usage</span>
<span class="n">energyFee</span><span class="o">:</span><span class="w"> </span><span class="n">energy</span><span class="w"> </span><span class="n">fee</span>
<span class="n">originEnergyUsage</span><span class="o">:</span><span class="w"> </span><span class="n">origin</span><span class="w"> </span><span class="n">energy</span><span class="w"> </span><span class="n">usage</span>
<span class="n">energyUsageTotal</span><span class="o">:</span><span class="w"> </span><span class="n">total</span><span class="w"> </span><span class="n">energy</span><span class="w"> </span><span class="n">usage</span><span class="w"> </span><span class="n">total</span>
</code></pre></div>

<h4 id="block-event">Block Event<a class="headerlink" href="#block-event" title="Permanent link">&para;</a></h4>
<p>The parameters passed to Subscriber:</p>
<div class="codehilite"><pre><span></span><code><span class="n">blockHash</span><span class="o">:</span><span class="w"> </span><span class="n">block</span><span class="w"> </span><span class="n">hash</span>
<span class="n">blockNumber</span><span class="o">:</span><span class="w"> </span><span class="n">block</span><span class="w"> </span><span class="n">number</span>
<span class="n">transactionSize</span><span class="o">:</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">transactions</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">block</span>
<span class="n">latestSolidifiedBlockNumber</span><span class="o">:</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">latest</span><span class="w"> </span><span class="n">solidified</span><span class="w"> </span><span class="n">block</span><span class="w"> </span><span class="n">number</span>
<span class="n">transactionList</span><span class="o">:</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">transactions</span><span class="w"> </span><span class="n">hash</span><span class="w"> </span><span class="n">list</span>
</code></pre></div>

<h4 id="contract-event">Contract Event<a class="headerlink" href="#contract-event" title="Permanent link">&para;</a></h4>
<p>The parameters passed to Subscriber:</p>
<div class="codehilite"><pre><span></span><code><span class="n">transactionId</span><span class="o">:</span><span class="w"> </span><span class="n">transaction</span><span class="w"> </span><span class="n">id</span>
<span class="n">contractAddress</span><span class="o">:</span><span class="w"> </span><span class="n">contract</span><span class="w"> </span><span class="n">address</span>
<span class="n">callerAddress</span><span class="o">:</span><span class="w"> </span><span class="n">contract</span><span class="w"> </span><span class="n">caller</span><span class="w"> </span><span class="n">address</span>
<span class="n">blockNumber</span><span class="o">:</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">block</span><span class="w"> </span><span class="n">contract</span><span class="w"> </span><span class="n">related</span><span class="w"> </span><span class="n">events</span><span class="w"> </span><span class="n">recorded</span>
<span class="n">blockTimestamp</span><span class="o">:</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">block</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="n">stamp</span>
<span class="n">eventSignature</span><span class="o">:</span><span class="w"> </span><span class="n">event</span><span class="w"> </span><span class="n">signature</span>
<span class="n">topicMap</span><span class="o">:</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">map</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">topic</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">solidity</span><span class="w"> </span><span class="n">language</span>
<span class="n">data</span><span class="o">:</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">information</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">solidity</span><span class="w"> </span><span class="n">language</span>
<span class="n">removed</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;true&#39;</span><span class="w"> </span><span class="n">means</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">removed</span>
</code></pre></div>

<h4 id="contract-log-event">Contract Log Event<a class="headerlink" href="#contract-log-event" title="Permanent link">&para;</a></h4>
<p>The parameters passed to Subscriber:</p>
<div class="codehilite"><pre><span></span><code><span class="n">transactionId</span><span class="o">:</span><span class="w"> </span><span class="n">transaction</span><span class="w"> </span><span class="n">hash</span>
<span class="n">contractAddress</span><span class="o">:</span><span class="w"> </span><span class="n">contract</span><span class="w"> </span><span class="n">address</span>
<span class="n">callerAddress</span><span class="o">:</span><span class="w"> </span><span class="n">contract</span><span class="w"> </span><span class="n">caller</span><span class="w"> </span><span class="n">address</span>
<span class="n">blockNumber</span><span class="o">:</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">block</span><span class="w"> </span><span class="n">contract</span><span class="w"> </span><span class="n">related</span><span class="w"> </span><span class="n">events</span><span class="w"> </span><span class="n">recorded</span>
<span class="n">blockTimestamp</span><span class="o">:</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">block</span><span class="w"> </span><span class="n">time</span><span class="w"> </span><span class="n">stamp</span>
<span class="n">contractTopics</span><span class="o">:</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">of</span><span class="w"> </span><span class="n">topic</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">solidity</span><span class="w"> </span><span class="n">language</span>
<span class="n">data</span><span class="o">:</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="n">information</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">solidity</span><span class="w"> </span><span class="n">language</span>
<span class="n">removed</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;true&#39;</span><span class="w"> </span><span class="n">means</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">log</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="n">removed</span>
</code></pre></div>

<p>Contract Event and Contract Log Even support event filter function which includes:</p>
<div class="codehilite"><pre><span></span><code><span class="n">fromBlock</span><span class="o">:</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="n">block</span><span class="w"> </span><span class="n">number</span>
<span class="n">toBlock</span><span class="o">:</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">end</span><span class="w"> </span><span class="n">block</span><span class="w"> </span><span class="n">number</span>
<span class="n">contractAddress</span><span class="o">:</span><span class="w"> </span><span class="n">contract</span><span class="w"> </span><span class="n">addresses</span><span class="w"> </span><span class="n">list</span>
<span class="n">contractTopics</span><span class="o">:</span><span class="w"> </span><span class="n">contract</span><span class="w"> </span><span class="n">topics</span><span class="w"> </span><span class="n">list</span>
</code></pre></div>

<div class="admonition note">
<p class="admonition-title">Note</p>
<ol>
<li>Historical data query is not supported.</li>
<li>When subscribing to non-solidified events, be sure to use the two parameters <code>blockNumber</code> and <code>blockHash</code> as the criteria to verify that the received events are valid. In special cases such as unstable network connections causing chain reorg, event reorg may occur as well, resulting in stale events.</li>
</ol>
</div>
<h3 id="new-features">New Features<a class="headerlink" href="#new-features" title="Permanent link">&para;</a></h3>
<ol>
<li>Supporting event plug-ins, kafka &amp; mongodb plug-ins have been released, developers can also customize their own plug-ins according to their own needs.</li>
<li>Supporting subscription of chain data, such as block, transaction, contract log, contract event and so on. For transaction events, developers can get information such as internal transactions, contract info and so on; for contract events, developers could configure the contract addresses list or contract topic list to receive the specified events, and event subscription has a very low latency. The deployed fullnode can receive event information immediately after the contract is executed.</li>
<li>Event query service tron-eventquery, online Event query service provided. Developers can query trigger information in the last seven days through https, and the query address is <a href="https://api.tronex.io">https://api.tronex.io</a>.</li>
</ol>
<h3 id="github-projects">Github projects<a class="headerlink" href="#github-projects" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="https://github.com/tronprotocol/event-plugin">tronprotocol/event-plugin</a></li>
<li><a href="https://github.com/tronprotocol/tron-eventquery">tronprotocol/tron-eventquery</a></li>
</ul>
<h4 id="event-plugin">Event plugin<a class="headerlink" href="#event-plugin" title="Permanent link">&para;</a></h4>
<ul>
<li><a href="../developers/deployment.html#kafka">Kafka deployment</a></li>
<li><a href="../developers/deployment.html#mongo">MongoDB deployment</a></li>
</ul>
<h4 id="event-query">Event query<a class="headerlink" href="#event-query" title="Permanent link">&para;</a></h4>
<p>TRON Event Query Service</p>
<p>TronEventQuery is implemented with Tron's new event subscribe model. It uses same query interface with Tron-Grid. Users can also subscribe block trigger, transaction trigger, contract log trigger, and contract event trigger. TronEvent is independent of a particular branch of java-tron, the new event subscribes model will be released on version 3.5 of java-tron.</p>
<p>For more information of TRON event subscribe model, please refer to <a href="https://github.com/tronprotocol/TIPs/issues/12">TIP-12</a>.</p>
<ul>
<li><a href="https://tronprotocol.github.io/documentation-en/developers/deployment/#event-subscribe-plugin-deployment">Event query deployment</a></li>
<li><a href="https://github.com/tronprotocol/documentation-en/tree/master/docs_without_index/plugin/event-query-http.md">Event query HTTP API</a></li>
</ul>
<h2 id="using-java-trons-built-in-message-queue-for-event-subscription">Using java-tron's Built-in Message Queue for Event Subscription<a class="headerlink" href="#using-java-trons-built-in-message-queue-for-event-subscription" title="Permanent link">&para;</a></h2>
<p>TRON provides event subscription service. Developers can not only obtain on-chain events through event plugin, but also through <a href="https://github.com/tronprotocol/tips/blob/master/tip-28.md">java-tron’s built-in ZeroMQ message queue</a>. The difference is that event plugin needs to be additionally deployed, which is used to implement event storage: developers can choose appropriate storage tools according to their needs, such as MongoDB, Kafka, etc., and the plugin help complete the storage of subscribed events. java-tron's built-in ZeroMQ does not require additional deployment operations. Event subscribers can directly connect to the publisher's ip and port, set subscription topics, and receive subscribed events. However, this method does not provide event storage. Therefore, when developers want to subscribe to events directly from nodes for a short period of time, then using the built-in message queue will be a more appropriate choice.</p>
<p>This article will introduce how to subscribe to events through java-tron's built-in message queue in detail.</p>
<h3 id="configure-node">Configure node<a class="headerlink" href="#configure-node" title="Permanent link">&para;</a></h3>
<p>To use the built-in ZeroMQ of the node for event subscription, you need to set the configuration item <code>useNativeQueue</code> to <code>true</code> in the node configuration file.</p>
<div class="codehilite"><pre><span></span><code><span class="nv">event</span>.<span class="nv">subscribe</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>{
<span class="w">  </span><span class="nv">native</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>{
<span class="w">    </span><span class="nv">useNativeQueue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">true</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nv">true</span>,<span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">native</span><span class="w"> </span><span class="nv">message</span><span class="w"> </span><span class="nv">queue</span>,<span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="nv">use</span><span class="w"> </span><span class="nv">event</span><span class="w"> </span><span class="nv">plugin</span>.
<span class="w">    </span><span class="nv">bindport</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5555</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="nv">bind</span><span class="w"> </span><span class="nv">port</span>
<span class="w">    </span><span class="nv">sendqueuelength</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1000</span><span class="w"> </span><span class="o">//</span><span class="nv">max</span><span class="w"> </span><span class="nv">length</span><span class="w"> </span><span class="nv">of</span><span class="w"> </span><span class="k">send</span><span class="w"> </span><span class="nv">queue</span>
<span class="w">  </span>}

<span class="w">  </span>......

<span class="w">  </span><span class="nv">topics</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>[
<span class="w">    </span>{
<span class="w">      </span><span class="nv">triggerName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;block&quot;</span><span class="w"> </span><span class="o">//</span><span class="w"> </span><span class="nv">block</span><span class="w"> </span><span class="nv">trigger</span>,<span class="w"> </span><span class="nv">the</span><span class="w"> </span><span class="nv">value</span><span class="w"> </span><span class="nv">can</span><span class="err">&#39;t be modified</span>
<span class="err">      enable = true</span>
<span class="err">      topic = &quot;block&quot; // plugin topic, the value could be modified</span>
<span class="err">    },</span>
<span class="err">    ......</span>
<span class="err">  ]</span>
<span class="err">}</span>
</code></pre></div>

<ul>
<li><code>native.useNativeQueue</code>: <code>true</code> is to use the built-in message queue, <code>false</code> is to use the event plugin</li>
<li><code>native.bindport</code>: ZeroMQ publisher binding port. In this example, it is <code>5555</code>, so the publisher address that the subscriber should connect to is <code>"tcp://127.0.0.1:5555"</code> </li>
<li><code>native.sendqueuelength</code>: The length of the send queue, that is, when the subscriber receives messages slowly, the maximum number of messages published by the publisher that the TCP buffer can hold. if it exceeds, The message will be discarded if exceeds the capacity</li>
<li><code>topics</code>: Subscribed <a href="#event-type">event type</a> , including block type, transaction type, etc.</li>
</ul>
<h3 id="start-node">Start node<a class="headerlink" href="#start-node" title="Permanent link">&para;</a></h3>
<p>The event subscription service is disabled by default and needs to be enabled by adding the command line parameter <code>--es</code>. The start command of the node that enables the event subscription service is as follows:</p>
<div class="codehilite"><pre><span></span><code>$<span class="w"> </span>java<span class="w"> </span>-jar<span class="w"> </span>FullNode.jar<span class="w"> </span>--es
</code></pre></div>

<h3 id="prepare-event-subscription-script">Prepare event subscription script<a class="headerlink" href="#prepare-event-subscription-script" title="Permanent link">&para;</a></h3>
<p>This article takes Nodejs as an example to illustrate how to subscribe to events.</p>
<p>First, install the zeromq library:</p>
<div class="codehilite"><pre><span></span><code><span class="n">$</span><span class="w"> </span><span class="n">npm</span><span class="w"> </span><span class="n">install</span><span class="w"> </span><span class="n">zeromq</span><span class="mi">@5</span>
</code></pre></div>

<p>Then, write the subscriber code:</p>
<div class="codehilite"><pre><span></span><code><span class="o">//</span><span class="w"> </span><span class="n">subscriber</span><span class="o">.</span><span class="n">js</span>
<span class="k">var</span><span class="w"> </span><span class="n">zmq</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">require</span><span class="p">(</span><span class="s2">&quot;zeromq&quot;</span><span class="p">),</span>
<span class="k">var</span><span class="w"> </span><span class="n">sock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">zmq</span><span class="o">.</span><span class="n">socket</span><span class="p">(</span><span class="s2">&quot;sub&quot;</span><span class="p">);</span>

<span class="n">sock</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;tcp://127.0.0.1:5555&quot;</span><span class="p">);</span>
<span class="n">sock</span><span class="o">.</span><span class="n">subscribe</span><span class="p">(</span><span class="s2">&quot;block&quot;</span><span class="p">);</span>
<span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="s2">&quot;Subscriber connected to port 5555&quot;</span><span class="p">);</span>

<span class="n">sock</span><span class="o">.</span><span class="n">on</span><span class="p">(</span><span class="s2">&quot;message&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">function</span><span class="p">(</span><span class="n">topic</span><span class="p">,</span><span class="w"> </span><span class="n">message</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">console</span><span class="o">.</span><span class="n">log</span><span class="p">(</span>
<span class="w">    </span><span class="s2">&quot;received a message related to:&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="n">Buffer</span><span class="o">.</span><span class="n">from</span><span class="p">(</span><span class="n">topic</span><span class="p">)</span><span class="o">.</span><span class="n">toString</span><span class="p">(),</span>
<span class="w">    </span><span class="s2">&quot;, containing message:&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="n">Buffer</span><span class="o">.</span><span class="n">from</span><span class="p">(</span><span class="n">message</span><span class="p">)</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span>
<span class="w">  </span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>

<p>This example connects the subscriber to the node event publisher and subscribes to <code>block</code> events.</p>
<h3 id="start-subscriber">Start subscriber<a class="headerlink" href="#start-subscriber" title="Permanent link">&para;</a></h3>
<p>Start command of Nodejs is as below:</p>
<div class="codehilite"><pre><span></span><code>$<span class="w"> </span>node<span class="w"> </span>subscriber.js

&gt;<span class="w"> </span>Subscriber<span class="w"> </span>connected<span class="w"> </span>to<span class="w"> </span>port<span class="w"> </span><span class="m">5555</span>
</code></pre></div>

<p>When the node has a new block, the subscriber will receive block event, the output information is as follows:</p>
<div class="codehilite"><pre><span></span><code>received a message related to: blockTrigger, containing message: {&quot;timeStamp&quot;:1678343709000,&quot;triggerName&quot;:&quot;blockTrigger&quot;,&quot;blockNumber&quot;:1361,&quot;blockHash&quot;:&quot;00000000000005519b3995cd638753a862c812d1bda11de14bbfaa5ad3383280&quot;,&quot;transactionSize&quot;:0,&quot;latestSolidifiedBlockNumber&quot;:1361,&quot;transactionList&quot;:[]}
received a message related to: blockTrigger, containing message: {&quot;timeStamp&quot;:1678343712000,&quot;triggerName&quot;:&quot;blockTrigger&quot;,&quot;blockNumber&quot;:1362,&quot;blockHash&quot;:&quot;0000000000000552d53d1bdd9929e4533a983f14df8931ee9b3bf6d6c74a47b0&quot;,&quot;transactionSize&quot;:0,&quot;latestSolidifiedBlockNumber&quot;:1362,&quot;transactionList&quot;:[]}
</code></pre></div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tracing", "navigation.expand", "navigation.tabs"], "search": "../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>